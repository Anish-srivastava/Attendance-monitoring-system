# render.yaml - Render Blueprint for both services
services:
  # Backend Service (Flask API)
  - type: web
    name: attendance-backend
    runtime: python
    plan: starter # Change to standard/pro for better performance with AI models
    rootDir: backend
    buildCommand: pip install -r requirements.txt
    startCommand: python app.py
    envVars:
      - key: FLASK_ENV
        value: production
      - key: PORT
        fromService:
          type: web
          name: attendance-backend
          property: port
      # Add these in Render dashboard:
      # - key: SUPABASE_URL
      #   value: your_supabase_url
      # - key: SUPABASE_ANON_KEY
      #   value: your_anon_key
      # - key: SUPABASE_SERVICE_ROLE_KEY
      #   value: your_service_role_key

  # Frontend Service (Next.js)
  - type: web
    name: attendance-frontend
    runtime: node
    plan: starter
    rootDir: frontend
    buildCommand: npm install && npm run build
    startCommand: npm start
    envVars:
      - key: NODE_ENV
        value: production
      - key: NEXT_PUBLIC_API_URL
        fromService:
          type: web
          name: attendance-backend
          property: host
      # Automatically uses the backend service URL

# Database (if needed for additional services)
# databases:
#   - name: attendance-db
#     plan: starter